{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\MEPSA-FULLSTACK\\\\Desktop\\\\workspace-release-12-2022\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{connect}from'react-redux';import{getAll}from'../../actions';import Title from'../../components/Title';import Text from'../../components/Text';import Button from'../../components/Button';import banner from'../../assets/static/divisions/banner.jpg';import{BsChevronRight}from'react-icons/bs';import moment from'moment';import'./styles.scss';var Wiki=function Wiki(props){var posts=props.posts,categories=props.categories,user=props.user,departments=props.departments;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),selectedCategory=_useState2[0],setSelectedCategory=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];useEffect(function(){props.getAll('wiki','GET_POSTS').then(function(){props.getAll('wiki/categories','GET_CATEGORIES');}).then(function(){props.getAll('users/departments','GET_DEPARTMENTS');});// eslint-disable-next-line\n},[]);useEffect(function(){if(departments&&categories){var department=departments.find(function(department){return parseInt(department.id)===parseInt(user.department);});console.log(department,'department');if(department!==undefined&&parseInt(user.role)===5){setSelectedCategory(categories.find(function(category){return category.name===department.name;}).id);}}// eslint-disable-next-line\n},[departments,categories]);if(departments&&posts&&categories){var categoryFiltered=selectedCategory!==0?posts.filter(function(post){return post.category_id===selectedCategory;}):posts;var searchFiltered=categoryFiltered.filter(function(post){return post.title.toLowerCase().includes(search);});var data=parseInt(user.role)===5?posts.filter(function(post){return post.category_id===selectedCategory;}):posts;return/*#__PURE__*/React.createElement(\"div\",{className:\"wiki\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__background\",style:{backgroundImage:\"linear-gradient(\\n        rgba(0, 0, 0, 0.5),\\n        rgba(0, 0, 0, 0.5)\\n      ), url(\".concat(banner,\")\")}},/*#__PURE__*/React.createElement(Title,{className:\"title --center --white\"},\"Marathon Wiki\")),/*#__PURE__*/React.createElement(\"div\",{className:\"wikiContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wikiContainer__content\"},posts?searchFiltered.map(function(post){return/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__entry\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(process.env.REACT_APP_API,\"docs/wiki/\").concat(post.img),alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__textBox\"},/*#__PURE__*/React.createElement(\"span\",null,moment(post.created).format('YYYY-mm-DD'),\" |\\xA0By\",' ',post.user_name),/*#__PURE__*/React.createElement(\"div\",null,post.title),/*#__PURE__*/React.createElement(\"p\",null,post.paragraph),/*#__PURE__*/React.createElement(\"a\",{href:\"wiki/\".concat(post.id)},/*#__PURE__*/React.createElement(Button,null,\"Leer m\\xE1s...\"))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__entry\"},/*#__PURE__*/React.createElement(\"img\",{src:banner,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__textBox\"},/*#__PURE__*/React.createElement(\"span\",null,\"2020-01-01 |\\xA0By Marathon\"),/*#__PURE__*/React.createElement(\"div\",null,\"Seven Doubts You Should Clarify About\"),/*#__PURE__*/React.createElement(\"p\",null,\"All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the\\u2026\"),/*#__PURE__*/React.createElement(Button,null,\"Leer m\\xE1s...\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"wikiContainer__history\"},/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__divider\"},\"Buscar\"),/*#__PURE__*/React.createElement(\"input\",{className:\"wiki__input\",onChange:function onChange(e){return setSearch(e.target.value);},placeholder:\"Buscar...\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__divider\"},\"Post Recientes\"),posts?data.slice(0,3).map(function(post){return/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__entryBlog\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(process.env.REACT_APP_API,\"docs/wiki/\").concat(post.img),alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__textBoxBlog\"},/*#__PURE__*/React.createElement(\"span\",null,moment(post.created).format('YYYY-mm-DD'),\" |\\xA0By\",' ',post.user_name),/*#__PURE__*/React.createElement(\"div\",null,post.title)));}):/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__entryBlog\"},/*#__PURE__*/React.createElement(\"img\",{src:banner,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__textBoxBlog\"},/*#__PURE__*/React.createElement(\"span\",null,\"2020-01-01 |\\xA0By Marathon\"),/*#__PURE__*/React.createElement(\"div\",null,\"Seven Doubts You Should Clarify About\"))),parseInt(user.role)!==5?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__divider\"},\"Categor\\xEDas\"),/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__month\",onClick:function onClick(){return setSelectedCategory(0);}},/*#__PURE__*/React.createElement(BsChevronRight,null),\" Todas\",/*#__PURE__*/React.createElement(\"hr\",null)),categories?categories.map(function(category){return/*#__PURE__*/React.createElement(\"div\",{className:\"wiki__month\",onClick:function onClick(){return setSelectedCategory(category.id);}},/*#__PURE__*/React.createElement(BsChevronRight,null),\" \",category.name,/*#__PURE__*/React.createElement(\"hr\",null));}):null):null)));}else{return/*#__PURE__*/React.createElement(\"div\",null,\"Cargando...\");}};var mapStateToProps=function mapStateToProps(state){return{posts:state.reducerWiki.posts,categories:state.reducerWiki.categories,user:state.reducersApp.user,departments:state.reducerWiki.departments};};var mapDispatchToProps={getAll:getAll};export default connect(mapStateToProps,mapDispatchToProps)(Wiki);","map":{"version":3,"sources":["C:/Users/MEPSA-FULLSTACK/Desktop/workspace-release-12-2022/web/src/pages/Wiki/index.jsx"],"names":["React","useEffect","useState","connect","getAll","Title","Text","Button","banner","BsChevronRight","moment","Wiki","props","posts","categories","user","departments","selectedCategory","setSelectedCategory","search","setSearch","then","department","find","parseInt","id","console","log","undefined","role","category","name","categoryFiltered","filter","post","category_id","searchFiltered","title","toLowerCase","includes","data","backgroundImage","map","process","env","REACT_APP_API","img","created","format","user_name","paragraph","e","target","value","slice","mapStateToProps","state","reducerWiki","reducersApp","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { getAll } from '../../actions'\nimport Title from '../../components/Title'\nimport Text from '../../components/Text'\nimport Button from '../../components/Button'\nimport banner from '../../assets/static/divisions/banner.jpg'\nimport { BsChevronRight } from 'react-icons/bs'\nimport moment from 'moment'\nimport './styles.scss'\n\nconst Wiki = props => {\n  const { posts, categories, user, departments } = props\n  const [selectedCategory, setSelectedCategory] = useState(0)\n  const [search, setSearch] = useState('')\n\n  useEffect(() => {\n    props\n      .getAll('wiki', 'GET_POSTS')\n      .then(() => {\n        props.getAll('wiki/categories', 'GET_CATEGORIES')\n      })\n      .then(() => {\n        props.getAll('users/departments', 'GET_DEPARTMENTS')\n      })\n    // eslint-disable-next-line\n  }, [])\n\n  useEffect(() => {\n    if (departments && categories) {\n      const department = departments.find(\n        department => parseInt(department.id) === parseInt(user.department)\n      )\n\n      console.log(department, 'department')\n\n      if (department !== undefined && parseInt(user.role) === 5) {\n        setSelectedCategory(\n          categories.find(category => category.name === department.name).id\n        )\n      }\n    }\n    // eslint-disable-next-line\n  }, [departments, categories])\n\n  if (departments && posts && categories) {\n    const categoryFiltered =\n      selectedCategory !== 0\n        ? posts.filter(post => post.category_id === selectedCategory)\n        : posts\n\n    const searchFiltered = categoryFiltered.filter(post =>\n      post.title.toLowerCase().includes(search)\n    )\n\n    let data =\n      parseInt(user.role) === 5\n        ? posts.filter(post => post.category_id === selectedCategory)\n        : posts\n\n    return (\n      <div className=\"wiki\">\n        <div\n          className=\"wiki__background\"\n          style={{\n            backgroundImage: `linear-gradient(\n        rgba(0, 0, 0, 0.5),\n        rgba(0, 0, 0, 0.5)\n      ), url(${banner})`,\n          }}\n        >\n          <Title className=\"title --center --white\">Marathon Wiki</Title>\n          {/*  <Text className=\"text --center --white\">\n            Lorem ipsum dolor sit amet consectetur adipisicing elit. Recusandae,\n            consequatur..\n          </Text> */}\n        </div>\n        <div className=\"wikiContainer\">\n          <div className=\"wikiContainer__content\">\n            {posts ? (\n              searchFiltered.map(post => (\n                <div className=\"wiki__entry\">\n                  <img\n                    src={`${process.env.REACT_APP_API}docs/wiki/${post.img}`}\n                    alt=\"\"\n                  />\n                  <div className=\"wiki__textBox\">\n                    <span>\n                      {moment(post.created).format('YYYY-mm-DD')} | By{' '}\n                      {post.user_name}\n                    </span>\n                    <div>{post.title}</div>\n                    <p>{post.paragraph}</p>\n                    <a href={`wiki/${post.id}`}>\n                      <Button>Leer más...</Button>\n                    </a>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"wiki__entry\">\n                <img src={banner} alt=\"\" />\n                <div className=\"wiki__textBox\">\n                  <span>2020-01-01 | By Marathon</span>\n                  <div>Seven Doubts You Should Clarify About</div>\n                  <p>\n                    All the Lorem Ipsum generators on the Internet tend to\n                    repeat predefined chunks as necessary, making this the…\n                  </p>\n                  <Button>Leer más...</Button>\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"wikiContainer__history\">\n            <div className=\"wiki__divider\">Buscar</div>\n            <input\n              className=\"wiki__input\"\n              onChange={e => setSearch(e.target.value)}\n              placeholder=\"Buscar...\"\n            />\n            <div className=\"wiki__divider\">Post Recientes</div>\n            {posts ? (\n              data.slice(0, 3).map(post => (\n                <div className=\"wiki__entryBlog\">\n                  <img\n                    src={`${process.env.REACT_APP_API}docs/wiki/${post.img}`}\n                    alt=\"\"\n                  />\n                  <div className=\"wiki__textBoxBlog\">\n                    <span>\n                      {moment(post.created).format('YYYY-mm-DD')} | By{' '}\n                      {post.user_name}\n                    </span>\n                    <div>{post.title}</div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"wiki__entryBlog\">\n                <img src={banner} alt=\"\" />\n                <div className=\"wiki__textBoxBlog\">\n                  <span>2020-01-01 | By Marathon</span>\n                  <div>Seven Doubts You Should Clarify About</div>\n                </div>\n              </div>\n            )}\n            {parseInt(user.role) !== 5 ? (\n              <div>\n                <div className=\"wiki__divider\">Categorías</div>\n                <div\n                  className=\"wiki__month\"\n                  onClick={() => setSelectedCategory(0)}\n                >\n                  <BsChevronRight /> Todas\n                  <hr />\n                </div>\n                {categories\n                  ? categories.map(category => (\n                      <div\n                        className=\"wiki__month\"\n                        onClick={() => setSelectedCategory(category.id)}\n                      >\n                        <BsChevronRight /> {category.name}\n                        <hr />\n                      </div>\n                    ))\n                  : null}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    )\n  } else {\n    return <div>Cargando...</div>\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    posts: state.reducerWiki.posts,\n    categories: state.reducerWiki.categories,\n    user: state.reducersApp.user,\n    departments: state.reducerWiki.departments,\n  }\n}\n\nconst mapDispatchToProps = {\n  getAll,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wiki)\n"]},"metadata":{},"sourceType":"module"}