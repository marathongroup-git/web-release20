{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\MEPSA-FULLSTACK\\\\Desktop\\\\workspace-release-12-2022\\\\web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\MEPSA-FULLSTACK\\\\Desktop\\\\workspace-release-12-2022\\\\web\\\\src\\\\pages\\\\Wiki\\\\index.jsx\";\n\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { getAll } from '../../actions';\nimport Title from '../../components/Title';\nimport Text from '../../components/Text';\nimport Button from '../../components/Button';\nimport banner from '../../assets/static/divisions/banner.jpg';\nimport { BsChevronRight } from 'react-icons/bs';\nimport moment from 'moment';\nimport './styles.scss';\n\nvar Wiki = function Wiki(props) {\n  var posts = props.posts,\n      categories = props.categories,\n      user = props.user,\n      departments = props.departments;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedCategory = _useState2[0],\n      setSelectedCategory = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  useEffect(function () {\n    props.getAll('wiki', 'GET_POSTS').then(function () {\n      props.getAll('wiki/categories', 'GET_CATEGORIES');\n    }).then(function () {\n      props.getAll('users/departments', 'GET_DEPARTMENTS');\n    }); // eslint-disable-next-line\n  }, []);\n  useEffect(function () {\n    if (departments && categories) {\n      var department = departments.find(function (department) {\n        return parseInt(department.id) === parseInt(user.department);\n      });\n      console.log(department, 'department');\n\n      if (department !== undefined && parseInt(user.role) === 5) {\n        setSelectedCategory(categories.find(function (category) {\n          return category.name === department.name;\n        }).id);\n      }\n    } // eslint-disable-next-line\n\n  }, [departments, categories]);\n\n  if (departments && posts && categories) {\n    var categoryFiltered = selectedCategory !== 0 ? posts.filter(function (post) {\n      return post.category_id === selectedCategory;\n    }) : posts;\n    var searchFiltered = categoryFiltered.filter(function (post) {\n      return post.title.toLowerCase().includes(search);\n    });\n    var data = parseInt(user.role) === 5 ? posts.filter(function (post) {\n      return post.category_id === selectedCategory;\n    }) : posts;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__background\",\n      style: {\n        backgroundImage: \"linear-gradient(\\n        rgba(0, 0, 0, 0.5),\\n        rgba(0, 0, 0, 0.5)\\n      ), url(\".concat(banner, \")\")\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      className: \"title --center --white\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, \"Marathon Wiki\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wikiContainer\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wikiContainer__content\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, posts ? searchFiltered.map(function (post) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wiki__entry\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"\".concat(process.env.REACT_APP_API, \"docs/wiki/\").concat(post.img),\n        alt: \"\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wiki__textBox\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, moment(post.created).format('YYYY-mm-DD'), \" |\\xA0By\", ' ', post.user_name), /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }\n      }, post.title), /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }\n      }, post.paragraph), /*#__PURE__*/React.createElement(\"a\", {\n        href: \"wiki/\".concat(post.id),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 23\n        }\n      }, \"Leer m\\xE1s...\"))));\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__entry\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: banner,\n      alt: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__textBox\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    }, \"2020-01-01 |\\xA0By Marathon\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    }, \"Seven Doubts You Should Clarify About\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 19\n      }\n    }, \"All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the\\u2026\"), /*#__PURE__*/React.createElement(Button, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }, \"Leer m\\xE1s...\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wikiContainer__history\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__divider\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, \"Buscar\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"wiki__input\",\n      onChange: function onChange(e) {\n        return setSearch(e.target.value);\n      },\n      placeholder: \"Buscar...\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__divider\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, \"Post Recientes\"), posts ? data.slice(0, 3).map(function (post) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wiki__entryBlog\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"\".concat(process.env.REACT_APP_API, \"docs/wiki/\").concat(post.img),\n        alt: \"\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wiki__textBoxBlog\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }, moment(post.created).format('YYYY-mm-DD'), \" |\\xA0By\", ' ', post.user_name), /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }\n      }, post.title)));\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__entryBlog\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: banner,\n      alt: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__textBoxBlog\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    }, \"2020-01-01 |\\xA0By Marathon\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 19\n      }\n    }, \"Seven Doubts You Should Clarify About\"))), parseInt(user.role) !== 5 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__divider\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, \"Categor\\xEDas\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wiki__month\",\n      onClick: function onClick() {\n        return setSelectedCategory(0);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(BsChevronRight, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 19\n      }\n    }), \" Todas\", /*#__PURE__*/React.createElement(\"hr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    })), categories ? categories.map(function (category) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wiki__month\",\n        onClick: function onClick() {\n          return setSelectedCategory(category.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(BsChevronRight, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }\n      }), \" \", category.name, /*#__PURE__*/React.createElement(\"hr\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }\n      }));\n    }) : null) : null)));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 12\n      }\n    }, \"Cargando...\");\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    posts: state.reducerWiki.posts,\n    categories: state.reducerWiki.categories,\n    user: state.reducersApp.user,\n    departments: state.reducerWiki.departments\n  };\n};\n\nvar mapDispatchToProps = {\n  getAll: getAll\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Wiki);","map":{"version":3,"sources":["C:/Users/MEPSA-FULLSTACK/Desktop/workspace-release-12-2022/web/src/pages/Wiki/index.jsx"],"names":["React","useEffect","useState","connect","getAll","Title","Text","Button","banner","BsChevronRight","moment","Wiki","props","posts","categories","user","departments","selectedCategory","setSelectedCategory","search","setSearch","then","department","find","parseInt","id","console","log","undefined","role","category","name","categoryFiltered","filter","post","category_id","searchFiltered","title","toLowerCase","includes","data","backgroundImage","map","process","env","REACT_APP_API","img","created","format","user_name","paragraph","e","target","value","slice","mapStateToProps","state","reducerWiki","reducersApp","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { getAll } from '../../actions'\nimport Title from '../../components/Title'\nimport Text from '../../components/Text'\nimport Button from '../../components/Button'\nimport banner from '../../assets/static/divisions/banner.jpg'\nimport { BsChevronRight } from 'react-icons/bs'\nimport moment from 'moment'\nimport './styles.scss'\n\nconst Wiki = props => {\n  const { posts, categories, user, departments } = props\n  const [selectedCategory, setSelectedCategory] = useState(0)\n  const [search, setSearch] = useState('')\n\n  useEffect(() => {\n    props\n      .getAll('wiki', 'GET_POSTS')\n      .then(() => {\n        props.getAll('wiki/categories', 'GET_CATEGORIES')\n      })\n      .then(() => {\n        props.getAll('users/departments', 'GET_DEPARTMENTS')\n      })\n    // eslint-disable-next-line\n  }, [])\n\n  useEffect(() => {\n    if (departments && categories) {\n      const department = departments.find(\n        department => parseInt(department.id) === parseInt(user.department)\n      )\n\n      console.log(department, 'department')\n\n      if (department !== undefined && parseInt(user.role) === 5) {\n        setSelectedCategory(\n          categories.find(category => category.name === department.name).id\n        )\n      }\n    }\n    // eslint-disable-next-line\n  }, [departments, categories])\n\n  if (departments && posts && categories) {\n    const categoryFiltered =\n      selectedCategory !== 0\n        ? posts.filter(post => post.category_id === selectedCategory)\n        : posts\n\n    const searchFiltered = categoryFiltered.filter(post =>\n      post.title.toLowerCase().includes(search)\n    )\n\n    let data =\n      parseInt(user.role) === 5\n        ? posts.filter(post => post.category_id === selectedCategory)\n        : posts\n\n    return (\n      <div className=\"wiki\">\n        <div\n          className=\"wiki__background\"\n          style={{\n            backgroundImage: `linear-gradient(\n        rgba(0, 0, 0, 0.5),\n        rgba(0, 0, 0, 0.5)\n      ), url(${banner})`,\n          }}\n        >\n          <Title className=\"title --center --white\">Marathon Wiki</Title>\n          {/*  <Text className=\"text --center --white\">\n            Lorem ipsum dolor sit amet consectetur adipisicing elit. Recusandae,\n            consequatur..\n          </Text> */}\n        </div>\n        <div className=\"wikiContainer\">\n          <div className=\"wikiContainer__content\">\n            {posts ? (\n              searchFiltered.map(post => (\n                <div className=\"wiki__entry\">\n                  <img\n                    src={`${process.env.REACT_APP_API}docs/wiki/${post.img}`}\n                    alt=\"\"\n                  />\n                  <div className=\"wiki__textBox\">\n                    <span>\n                      {moment(post.created).format('YYYY-mm-DD')} | By{' '}\n                      {post.user_name}\n                    </span>\n                    <div>{post.title}</div>\n                    <p>{post.paragraph}</p>\n                    <a href={`wiki/${post.id}`}>\n                      <Button>Leer más...</Button>\n                    </a>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"wiki__entry\">\n                <img src={banner} alt=\"\" />\n                <div className=\"wiki__textBox\">\n                  <span>2020-01-01 | By Marathon</span>\n                  <div>Seven Doubts You Should Clarify About</div>\n                  <p>\n                    All the Lorem Ipsum generators on the Internet tend to\n                    repeat predefined chunks as necessary, making this the…\n                  </p>\n                  <Button>Leer más...</Button>\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"wikiContainer__history\">\n            <div className=\"wiki__divider\">Buscar</div>\n            <input\n              className=\"wiki__input\"\n              onChange={e => setSearch(e.target.value)}\n              placeholder=\"Buscar...\"\n            />\n            <div className=\"wiki__divider\">Post Recientes</div>\n            {posts ? (\n              data.slice(0, 3).map(post => (\n                <div className=\"wiki__entryBlog\">\n                  <img\n                    src={`${process.env.REACT_APP_API}docs/wiki/${post.img}`}\n                    alt=\"\"\n                  />\n                  <div className=\"wiki__textBoxBlog\">\n                    <span>\n                      {moment(post.created).format('YYYY-mm-DD')} | By{' '}\n                      {post.user_name}\n                    </span>\n                    <div>{post.title}</div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"wiki__entryBlog\">\n                <img src={banner} alt=\"\" />\n                <div className=\"wiki__textBoxBlog\">\n                  <span>2020-01-01 | By Marathon</span>\n                  <div>Seven Doubts You Should Clarify About</div>\n                </div>\n              </div>\n            )}\n            {parseInt(user.role) !== 5 ? (\n              <div>\n                <div className=\"wiki__divider\">Categorías</div>\n                <div\n                  className=\"wiki__month\"\n                  onClick={() => setSelectedCategory(0)}\n                >\n                  <BsChevronRight /> Todas\n                  <hr />\n                </div>\n                {categories\n                  ? categories.map(category => (\n                      <div\n                        className=\"wiki__month\"\n                        onClick={() => setSelectedCategory(category.id)}\n                      >\n                        <BsChevronRight /> {category.name}\n                        <hr />\n                      </div>\n                    ))\n                  : null}\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n    )\n  } else {\n    return <div>Cargando...</div>\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    posts: state.reducerWiki.posts,\n    categories: state.reducerWiki.categories,\n    user: state.reducersApp.user,\n    departments: state.reducerWiki.departments,\n  }\n}\n\nconst mapDispatchToProps = {\n  getAll,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Wiki)\n"]},"metadata":{},"sourceType":"module"}